(this["webpackJsonplearn-redux3"]=this["webpackJsonplearn-redux3"]||[]).push([[0],{1346:function(e,t){},1363:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n(73),s=n(3),c=n.n(s),o=n(69),i=n.n(o),d=(n(165),n(151)),u=n(14),p=n(11),l=function(){return Object(p.jsx)("nav",{children:Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{children:"Redux Essentials Example"}),Object(p.jsx)("div",{className:"navContent",children:Object(p.jsx)("div",{className:"navLinks"})})]})})},j=n(44),b=function(){var e=Object(j.c)((function(e){return e.posts})).map((function(e){return Object(p.jsxs)("article",{className:"post-excerpt",children:[Object(p.jsx)("h3",{children:e.title}),Object(p.jsx)("p",{className:"post-content",children:e.content.substring(0,100)})]},e.id)}));return Object(p.jsxs)("section",{className:"posts-list",children:[Object(p.jsx)("h2",{children:"Posts"}),e]})},O=n(16),m=n(26),f=Object(m.b)({name:"posts",initialState:[{id:"1",title:"First Post!",content:"Hello!"},{id:"2",title:"Second Post",content:"More text"}],reducers:{postAdded:function(e,t){e.push(t.payload)}}}),h=f.actions.postAdded,v=f.reducer,x=function(){var e=Object(s.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),c=Object(O.a)(a,2),o=c[0],i=c[1],d=Object(j.b)();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Add Post"}),Object(p.jsxs)("form",{children:[Object(p.jsx)("label",{htmlFor:"postTitle",children:"Post Title"}),Object(p.jsx)("input",{type:"text",name:"postTitle",id:"postTitle",value:n,onChange:function(e){r(e.target.value)}}),Object(p.jsx)("label",{htmlFor:"postContent",children:"Content:"}),Object(p.jsx)("textarea",{type:"text",name:"postContent",id:"postContent",value:o,onChange:function(e){i(e.target.value)}}),Object(p.jsx)("button",{type:"button",onClick:function(e){n&&o&&(d(h({id:Object(m.c)(),title:n,content:o})),r(""),i(""))},children:"Save Post"})]})]})};var y,g=function(){return Object(p.jsxs)(d.a,{children:[Object(p.jsx)(l,{}),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x,{}),Object(p.jsx)(b,{})]})}}),Object(p.jsx)(u.a,{to:"/"})]})})]})},S=Object(m.a)({reducer:{posts:v}}),w=n(34),N=n(43),A=n(153),k=n(35),I=n(28),C=n(159),F=n(25),q=n(31),M=n.n(q),T=n(104),P=n.n(T),D=n(154),J=n(155),K=n(112),E=["id"],R=2e3,U=P()(),B=localStorage.getItem("randomTimestampSeed");function H(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(U()*(t-e+1))+e}B?y=new Date(B):(B=(y=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",B)),U=P()(B),Object(J.setRandom)(U),M.a.seed(y.getTime());for(var L,z=function(e){return e[H(0,e.length-1)]},G=Object(F.factory)({user:{id:Object(F.primaryKey)(m.c),firstName:String,lastName:String,name:String,username:String,posts:Object(F.manyOf)("post")},post:{id:Object(F.primaryKey)(m.c),title:String,date:String,content:String,reactions:Object(F.oneOf)("reaction"),comments:Object(F.manyOf)("comment"),user:Object(F.oneOf)("user")},comment:{id:Object(F.primaryKey)(String),date:String,text:String,post:Object(F.oneOf)("post")},reaction:{id:Object(F.primaryKey)(m.c),thumbsUp:Number,hooray:Number,heart:Number,rocket:Number,eyes:Number,post:Object(F.oneOf)("post")}}),Q=function(){var e=M.a.name.firstName(),t=M.a.name.lastName();return{firstName:e,lastName:t,name:"".concat(e," ").concat(t),username:M.a.internet.userName()}},V=0;V<3;V++)for(var W=G.user.create(Q()),X=0;X<3;X++){var Y=(L=W,{title:M.a.lorem.words(),date:M.a.date.recent(7).toISOString(),user:L,content:M.a.lorem.paragraphs(),reactions:G.reaction.create()});G.post.create(Y)}var Z=function(e){return Object(k.a)(Object(k.a)({},e),{},{user:e.user.id})},$=[I.c.get("/fakeApi/posts",(function(e,t,n){var r=G.post.getAll().map(Z);return t(n.delay(R),n.json(r))})),I.c.post("/fakeApi/posts",(function(e,t,n){var r=e.body;if("error"===r.content)return t(n.delay(R),n.status(500),n.json("Server error saving this post!"));r.date=(new Date).toISOString();var a=G.user.findFirst({where:{id:{equals:r.user}}});r.user=a,r.reactions=G.reaction.create();var s=G.post.create(r);return t(n.delay(R),n.json(Z(s)))})),I.c.get("/fakeApi/posts/:postId",(function(e,t,n){var r=G.post.findFirst({where:{id:{equals:e.params.postId}}});return t(n.delay(R),n.json(Z(r)))})),I.c.patch("/fakeApi/posts/:postId",(function(e,t,n){var r=e.body,a=(r.id,Object(A.a)(r,E)),s=G.post.update({where:{id:{equals:e.params.postId}},data:a});return t(n.delay(R),n.json(Z(s)))})),I.c.get("/fakeApi/posts/:postId/comments",(function(e,t,n){var r=G.post.findFirst({where:{id:{equals:e.params.postId}}});return t(n.delay(R),n.json({comments:r.comments}))})),I.c.post("/fakeApi/posts/:postId/reactions",(function(e,t,n){var r=e.params.postId,a=e.body.reaction,s=G.post.findFirst({where:{id:{equals:r}}}),c=G.post.update({where:{id:{equals:r}},data:{reactions:Object(k.a)(Object(k.a)({},s.reactions),{},Object(N.a)({},a,s.reactions[a]+=1))}});return t(n.delay(R),n.json(Z(c)))})),I.c.get("/fakeApi/notifications",(function(e,t,n){var r=re(void 0,H(1,5),G);return t(n.delay(R),n.json(r))})),I.c.get("/fakeApi/users",(function(e,t,n){return t(n.delay(R),n.json(G.user.getAll()))}))],_=C.a.apply(void 0,$),ee=new D.Server("ws://localhost"),te=function(e,t){!function(e,t){e.send(JSON.stringify(t))}(e,{type:"notifications",payload:re(t,H(1,5),G)})};ee.on("connection",(function(e){e,e.on("message",(function(t){var n=JSON.parse(t);if("notifications"===n.type){var r=n.payload;te(e,r)}}))}));var ne=["poked you","says hi!","is glad we're friends","sent you a gift"];function re(e,t,n){var r,a=new Date;e?r=Object(K.a)(e):(r=new Date(a.valueOf())).setMinutes(r.getMinutes()-15);var s=Object(w.a)(Array(t)).map((function(){var e=z(n.user.getAll()),t=z(ne);return{id:Object(m.c)(),date:M.a.date.between(r,a).toISOString(),message:t,user:e.id}}));return s}function ae(){return(ae=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.start({onUnhandledRequest:"bypass"});case 2:i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(j.a,{store:S,children:Object(p.jsx)(g,{})})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){ae.apply(this,arguments)}()},165:function(e,t,n){}},[[1363,1,2]]]);
//# sourceMappingURL=main.9dd5f570.chunk.js.map